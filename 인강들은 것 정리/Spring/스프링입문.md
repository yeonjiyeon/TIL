### 1.í”„ë¡œì íŠ¸ í™˜ê²½ì„¤ì •

**1-1.í”„ë¡œì íŠ¸ í™˜ê²½ì„¤ì •**

:ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„° ì‚¬ì´íŠ¸ë¡œ ì´ë™í•´ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ ìƒì„±
[https://start.spring.io/](https://start.spring.io/)

-maven or gradle
í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë•¡ê²¨ì„œ ì˜¤ê³  ë¹Œë“œí•˜ëŠ” ë¼ì´í”„ì‚¬ì´í´ê¹Œì§€ ê´€ë¦¬í•´ì£¼ëŠ” íˆ´
ë²„ì „ì„¤ì •í•˜ê³  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë•¡ê²¨ì˜¤ëŠ” ê²ƒ
ìš”ì¦˜ì€ gradleì„ ë” ë§ì´ ì‚¬ìš©í•œë‹¤

-> xmlì´ ì•„ë‹Œ javaì–¸ì–´ë¡œ ë˜ì–´ ìˆì–´ì„œ ë” í¸í•˜ê¸° ë•Œë¬¸ì—
ë²„ì „ì€ ì •ì‹ë¦´ë¦¬ì¦ˆëœ ë²„ì „ì„ ì“°ëŠ” ê²ƒì´ ì¢‹ë‹¤

-Project Metadata
-Group : ê·¸ë£¹ì—ëŠ” ë³´í†µ ê¸°ì—… ë„ë©”ì¸ëª…ì„ ì ëŠ”ë‹¤

-Artifact: ì–´ë–»ê²Œ ë‚˜ì˜¬ì§€ ê²°ê³¼ë¬¼

-Dependencies: ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë•¡ê²¨ì„œ ì“¸ ê²ƒì¸ì§€ ì„¤ì •

-Thymeleaf: í…œí”Œë¦¿ ì—”ì§„

-íŒŒì¼êµ¬ì¡° : main, test í˜•ì‹ìœ¼ë¡œ ë˜ì–´ìˆë‹¤

mainì— java, resources
java: ë°‘ì— ì‹¤ì œ ì†ŒìŠ¤ì½”ë“œë“¤ì´ ìˆë‹¤
resources : ìë°”íŒŒì¼ ì™¸ ì†ŒìŠ¤ì½”ë“œë“¤ì´ ë“¤ì–´ìˆë‹¤ ex) html
test ì½”ë“œë“¤ê³¼ ê´€ë ¨ëœ ì†ŒìŠ¤ë“¤ì´ ë“¤ì–´ê°„ë‹¤, ìš”ì¦˜ì—ëŠ” ì¤‘ìš”í•¨

```java

sourceCompatibility = '11'  --> ìë°”ë²„ì „ì„ ì˜ë¯¸í•œë‹¤
repositories {
mavenCentral() 
//*mavenCentral ì‚¬ì´íŠ¸ì—ì„œ ìë™ìœ¼ë¡œ ì„¤ì •í•œ dependenciesë¥¼ ë‹¤ìš´ë°›ì•„ì¤€ë‹¤*
}
dependencies {
implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
implementation 'org.springframework.boot:spring-boot-starter-web'
//ì„¤ì¹˜í•´ì¤¬ë˜ dependencies
testImplementation('org.springframework.boot:spring-boot-starter-test') {
exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
/*ìë™ìœ¼ë¡œ ë“¤ì–´ê°„ í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ 'junit 5ë²ˆì§¸ ë²„ì „*/
}

}
```

<build.gradle>

.gitignore : ìë™ìœ¼ë¡œ ì†ŒìŠ¤ì½”ë“œë¥¼ ê´€ë¦¬í•´ì£¼ëŠ” íŒŒì¼ì´ë‹¤
@SpringBootApplication : í†°ìº£ ì›¹ì„œë²„ê°€ ë‚´ì¥ë˜ì–´ ìˆì–´ì„œ ìì²´ì ìœ¼ë¡œ ë„ìš°ë©´ì„œ ìŠ¤í”„ë§ë¶€íŠ¸ê°€ ê°™ì´ì˜¬ë¼ì˜¨ë‹¤

settings --> gradle ê²€ìƒ‰
Build and run using
Run tests using
ë‘˜ ë‹¤ intellij idea ë¡œ ë°”ê¾¸ê¸° --> gradleì„ ê±°ì¹˜ì§€ ì•Šê³  ë°”ë¡œ ì ìš©ë˜ì–´ì„œ ì†ë„ê°€ í–¥ìƒëœë‹¤, ì„¤ì •ì„ í•˜ì§€ ì•Šìœ¼ë©´ gradleì„ í†µí•´ ë¹Œë“œê°€ ë˜ì–´ì„œ ì†ë„ê°€ ëŠë ¤ì§„ë‹¤

**1-2.ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚´í´ë³´ê¸°**
External Libraries: ë¹Œë“œíˆ´ì„ í†µí•´ ë‹¤ìš´ë°›ì€ ê²ƒë“¤ì„ ë³´ì—¬ì¤€ë‹¤
gradleì´ë‚˜ mavenê°™ì€ ë¹Œë“œíˆ´ë“¤ì€ ì˜ì¡´ê´€ê³„ë¥¼ ê´€ë¦¬í•´ ì¤€ë‹¤ dependenciesì—ì„œ ì„¤ì¹˜ëœ ê²ƒë“¤ ì¤‘ì—ì„œí•„ìš”ë¡œ í•˜ëŠ” ì˜ì¡´ë“¤ì„ ìë™ìœ¼ë¡œ ë” ë•¡ê²¨ì˜¨ë‹¤-> í•„ìš”í•œ ê²ƒë“¤ì„ ëª¨ë‘ ë•¡ê²¨ì¤€ë‹¤-> coreê¹Œì§€ ì´ì–´ì§„ë‹¤

- spring-boot-starter-web â†’spring-core --> ì½”ì–´ê¹Œì§€ ì´ì–´ì§„ë‹¤
    
    -spring-boot-starter-logging
    í˜„ì—…ì—ì„œëŠ” ë¡œê·¸ ì¶œë ¥ì´ í•„ìš”í•˜ë‹¤ --> í˜„ì—…ì—ì„œëŠ” System.out.printlnì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
    logback, slf4j
    slf4j : ì¸í„°í˜ì´ìŠ¤
    logback: slf4j êµ¬í˜„, ì‹¤ì œ ë¡œê·¸ë¥¼ ì–´ë–¤ êµ¬í˜„ì²´ë¡œ ì¶œë ¥í•  ê²ƒì¸ê°€
    

í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
spring-boot-starter-test
junit: í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬,ìë°”ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìœ ë‹›í…ŒìŠ¤íŠ¸ ìš”ì¦˜ì€ 5ì‚¬ìš©
mockito: ëª© ë¼ì´ë¸ŒëŸ¬ë¦¬
assertj: í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¢€ ë” í¸í•˜ê²Œ ì‘ì„±í•˜ê²Œ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
spring-test: ìŠ¤í”„ë§ í†µí•© í…ŒìŠ¤íŠ¸ ì§€ì›

- spring-boot-starter-thymeleaf: íƒ€ì„ë¦¬í”„ í…œí”Œë¦¿ ì—”ì§„(View)

**1-3.View í™˜ê²½ì„¤ì •**
[https://docs.spring.io/spring-boot/docs/2.3.12.RELEASE/reference/html/](https://docs.spring.io/spring-boot/docs/2.3.12.RELEASE/reference/html/)
í˜ì´ì§€ì—ì„œ í•„ìš”í•œ ê²ƒ ì°¾ì•„ë³´ê¸°

ìŠ¤í”„ë§ë¶€íŠ¸ëŠ” ìŠ¤í”„ë§ìƒíƒœê³„ì„ ì „ë°˜ì ìœ¼ë¡œ ê°ì‹¸ê¸° ë•Œë¬¸ì— ì „ë°˜ì  ìƒíƒœê³„ë¥¼ ëª¨ë‘ ì œê³µí•´ ì¤€ë‹¤

<welcome page>
static íŒŒì¼(ì •ì  íŒŒì¼)ì—ì„œ index.htmlì„ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤ 

Controller ì²˜ìŒ ì‹œì‘í• ë•Œ ì‹¤í–‰ëœë‹¤

ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” Welcome Page ê¸°ëŠ¥
static/index.html ì„ ì˜¬ë ¤ë‘ë©´ Welcome page ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
https://docs.spring.io/spring-boot/docs/2.3.1.RELEASE/reference/html/spring-bootfeatures.html#boot-features-spring-mvc-welcome-page

<hello.html>

```html
<html xmlns:th="http://www.thymeleaf.org">
<head>
 <title>Hello</title>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<p th:text="'ì•ˆë…•í•˜ì„¸ìš”. ' + ${data}" >ì•ˆë…•í•˜ì„¸ìš”. ì†ë‹˜</p>
</body>
</html>
```

<helloController>

```java
//Controller
public class HelloController {
@GetMapping("hello")
public String hello(Model model) {
model.addAttribute("data", "hello!!");
return "hello";
}//*hello.htmlì„ ì°¾ëŠ”ë‹¤*
}
```



ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë¦¬í„´ ê°’ìœ¼ë¡œ ë¬¸ìë¥¼ ë°˜í™˜í•˜ë©´ `ë·° ë¦¬ì¡¸ë²„`( viewResolver )ê°€ í™”ë©´ì„ ì°¾ì•„ì„œ ì²˜ë¦¬í•œë‹¤.
ìŠ¤í”„ë§ ë¶€íŠ¸ í…œí”Œë¦¿ì—”ì§„ ê¸°ë³¸ viewName ë§¤í•‘
resources:templates/ +{ViewName}+ .html

ì°¸ê³ : spring-boot-devtools ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ë©´, html íŒŒì¼ì„ ì»´íŒŒì¼ë§Œ í•´ì£¼ë©´ ì„œë²„ ì¬ì‹œì‘ ì—†ì´ View íŒŒì¼ ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤

**1-4<ë¹Œë“œí•˜ê³  ì‹¤í–‰í•˜ê¸°>**
cmdì°½
F:\study\hello-spring\hello-spring ë¡œ ì´ë™

ëª…ë ¹ í”„ë¡¬í”„íŠ¸ì—ì„œ gradlew.bat ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ gradlew í•˜ê³  ì—”í„°

gradlew build

í´ë” ëª©ë¡ í™•ì¸ ls dir
gradlew clean build --info
cd build/libs  ë¡œ ì´ë™

### 2.ìŠ¤í”„ë§ ì›¹ ê°œë°œ ê¸°ì´ˆ

**2-1ì •ì  ì»¨í…ì¸ **:ì„œë²„ì™€ ê´€ê³„ì—†ì´ íŒŒì¼ì„ ê·¸ëŒ€ë¡œ ê³ ê°(ì›¹ ë¸Œë¼ìš°ì €)ì—ê²Œ ì „ë‹¬í•´ ì£¼ëŠ” ê²ƒ

 --> ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œ ìë™ìœ¼ë¡œ ì œê³µí•œë‹¤
ë‚´ì¥ í†°ìº£ ì„œë²„ê°€ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë§¤í•‘ëœ ê²ƒì„ ì°¾ì§€ ëª»í•œ ë‹¤ë©´(ì»¨íŠ¸ë¡¤ëŸ¬ì— ë“±ë¡x)â†’ static íŒŒì¼ì—ì„œ íŒŒì¼ì„ ì°¾ì•„ì„œ ë°˜í™˜í•´ ì¤€ë‹¤

```html
<!DOCTYPE HTML>
<html>
<head>
  <title>static content</title>
  <meta http-equiv="Content-Type" content="text/html; charsetã…“=UTF-8" />
</head><body>
ì •ì  ì»¨í…ì¸  ì…ë‹ˆë‹¤.
</body>
</html>
```

/hello-static ë¡œ ì…ë ¥í•˜ë©´ ê·¸ëƒ¥ íŒŒì¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í•´ ì¤€ë‹¤



 

**2-2 MVCì™€ í…œí”Œë¦¿ ì—”ì§„** : ex)jsp,phpì²˜ëŸ¼  ì„œë²„ì—ì„œ í”„ë¡œê·¸ë˜ë°í•´ì„œ htmlì„ ë™ì ìœ¼ë¡œ ë°”ê¿”ì„œ ë‚´ë ¤ì£¼ëŠ” ê²ƒ
model1ë°©ì‹ : viewì— ëª¨ë‘ ì‘ì„±í•´ ì£¼ëŠ” ê²ƒ, ëª¨ë¸ê³¼ ë·° ë¶„ë¦¬ ì•ˆí•¨

vs

model2ë°©ì‹
ê´€ì‹¬ì‚¬ ë¶„ë¥˜(aop), ì—­í• ê³¼ ì±…ì„
**view**: í™”ë©´ì„ ê·¸ë¦¬ëŠ”ë° ëª¨ë“  ì˜í–¥ì„ ì§‘ì¤‘
**model, controller**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ê´€ë ¨ ë‚´ë¶€ì ì¸ ê²ƒì„ ì²˜ë¦¬í•˜ëŠ”ë° ì§‘ì¤‘í•´ì•¼ í•œë‹¤(ë’·ë‹¨(ì„œë²„)ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒ) í•„ìš”í•œ ê²ƒì„ ë‹´ì•„ì„œ í™”ë©´ì— ë˜ì ¸ì¤€ë‹¤.

```java

model.addAttribute("data", "hello!!"); //dataì— ì§ì ‘ ì´ë¦„ì„ ë„£ì–´ì¤€ë‹¤

@GetMapping("hello-mvc") //urlì— ë„ìš¸ ì´ë¦„
public String helloMvc(@RequestParam("name") String name, Model model){
//urlì˜ íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ë°›ì•„ì˜¨ë‹¤
//@RequestParam("name",  required = false) ì„¤ì •í•´ ì£¼ë©´ ê°’ì„ ë„˜ê¸°ì§€ ì•Šì•„ë„ ì—ëŸ¬ê°€ ì•ˆë‚œë‹¤
model.addAttribute("name", name);//nameì— íŒŒë¼ë¯¸í„°ì—ì„œ ë°›ì•„ì˜¨ ì´ë¦„ì„ ë„˜ê¸´ë‹¤
return  "hello-template"; //ì „ë‹¬í•  htmlíŒŒì¼
} 
```

[http://localhost:8080/hello-mvc?name=spring](http://localhost:8080/hello-mvc?name=spring)!!
viewResolver: í™”ë©´ì— ê´€ë ¨ëœ í•´ê²°ì
ì •ì  ì†ŒìŠ¤ëŠ” ë³€í™˜ê³¼ì •ì´ ì—†ì§€ë§Œ í…œí”Œë¦¿ ì—”ì§„ì€ ë³€í™˜ê³¼ì •ì´ ì¡´ì¬í•¨

ë³€í™˜í•´ì„œ ëœë”ë§í•´ì¤€ë‹¤

thymeleaf â€”> íŒŒì¼ ì—´ì–´ì„œ ë‚´ìš©ë¬¼ ë³¼ ìˆ˜ ìˆìŒ jspì™€ ë‹¤ë¥´ê²Œ,,,

```html
<html xmlns:th="http://www.thymeleaf.org">
<body>
<p th:text="'hello ' + ${name}">hello! empty</p>
</body>
</html>
```



**2-3. API** : ë°ì´í„°êµ¬ì¡° í¬ë©§(json, xml)ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ì‹,ë°ì´í„°ë¥¼ htmlì„ í†µí•˜ì§€ ì•Šê³  ë°”ë¡œ ë‚´ë¦¬ëŠ” ê²ƒ

ex) vue,reactì ìš©í•˜ê±°ë‚˜ ì„œë²„ë¼ë¦¬ í†µì‹ í• ë•Œ ë§ì´ ì‚¬ìš©í•œë‹¤

```java
@GetMapping("hello-string")//ë¬¸ìì‚¬ìš©í• ë•Œ
    @ResponseBody
    public String helloString(@RequestParam("name") String name){
        return "hello " + name;//ë°ì´í„°ë¥¼ ë¬¸ì ê·¸ëŒ€ë¡œ ë‚´ë ¤ì¤€ë‹¤
    }

*@GetMapping("hello-api")//ë°ì´í„° ì‚¬ìš©í• ë•Œ
@ResponseBody
public Hello helloApi(@RequestParam("name") String name){
    Hello hello = new Hello();
    hello.setName(name);
    return hello;//ê°ì²´ë¥¼ ë„˜ê¸´ë‹¤, jsoní˜•íƒœ(*{"name":"spring!!"} í‚¤ ê°’ êµ¬ì¡°*)ë¡œ ë‚˜ì˜¨ë‹¤
}

static class  Hello {
    private  String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}*
```

@ResponseBody
 httpì—ì„œ bodyë¶€ë¶„ì— ë°ì´í„°(ì‘ë‹µ)ë¥¼ ì§ì ‘ ë„£ì–´ ì¤€ë‹¤ëŠ” ì˜ë¯¸,
 ë·°ë¥¼ ë§Œë“¤ í•„ìš” ì—†ì´ ë¬¸ìê°€ ë°”ë¡œ ì ìš©ëœë‹¤

- xml ë°©ì‹:ë¬´ê²ê³  íƒœê·¸ì‚¬ìš©ìœ¼ë¡œ ë²ˆê±°ë¡œì›€ â€”> ìµœê·¼ JSON ë°©ì‹ì´ ë” ë§ì•„ì§
- getter,setter :ìë°”ë¹ˆ í‘œì¤€ ë°©ì‹, property ì ‘ê·¼ ë°©ì‹, ë³€ìˆ˜ ì§ì ‘ ë³€ê²½ ëª»í•˜ê³  ë©”ì„œë“œë¥¼ í†µí•´ì„œ ë³€ê²½ì‹œí‚¤ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤



controllerê°€ urlì„ í…œí”Œë¦¿ ì—”ì§„ì—ì„œ ì°¾ì§€ë§Œ
`@ResponseBodyê°€ ìˆëŠ” ê²½ìš°` ê·¸ëŒ€ë¡œ ì‘ë‹µì— ê·¸ëŒ€ë¡œ ë°ì´í„°ë¥¼ ë˜ì ¸ ë„£ëŠ”ë‹¤. í•˜ì§€ë§Œ `ê°ì²´ì¸ ê²½ìš°`ì—ëŠ” jsonë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë§Œë“¤ì–´ì„œ httpì— ì‘ë‹µì„ í•¨

@ResponseBody ë¥¼ ì‚¬ìš©
HTTPì˜ BODYì— ë¬¸ì ë‚´ìš©ì„ ì§ì ‘ ë°˜í™˜
viewResolver ëŒ€ì‹ ì— HttpMessageConverter ê°€ ë™ì‘
ê¸°ë³¸ ë¬¸ìì²˜ë¦¬: StringHttpMessageConverter
ê¸°ë³¸ ê°ì²´ì²˜ë¦¬: MappingJackson2HttpMessageConverter
byte ì²˜ë¦¬ ë“±ë“± ê¸°íƒ€ ì—¬ëŸ¬ HttpMessageConverterê°€ ê¸°ë³¸ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆìŒ

*jsonìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬: Jackson(ìŠ¤í”„ë§ì—ì„œ ê¸°ë³¸), gson

### 3.íšŒì› ê´€ë¦¬ ì˜ˆì œ - ë°±ì—”ë“œ ê°œë°œ

**3-1. ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ ì •ë¦¬**

<ì¼ë°˜ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ êµ¬ì¡°>

ì»¨íŠ¸ë¡¤ëŸ¬: ì›¹ MVCì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• 



**ì„œë¹„ìŠ¤**: ì„œë¹„ìŠ¤í´ë˜ìŠ¤ì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„ ì˜ˆ) íšŒì›ì€ ì¤‘ë³µê°€ì…ì´ ì•ˆëœë‹¤ ë“±ë“±ì˜ ë¡œì§
**ë¹„ì¦ˆë‹ˆìŠ¤**: ë„ë©”ì¸ê°ì²´ë¥¼ ê°€ì§€ê³  í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë™ì‘í•˜ë„ë¡ êµ¬í˜„í•œ ê³„ì¸µ
**ë¦¬í¬ì§€í† ë¦¬**: ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼, ë„ë©”ì¸ ê°ì²´ë¥¼ DBì— ì €ì¥í•˜ê³  ê´€ë¦¬
**ë„ë©”ì¸**: ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ê´€ë¦¬ë˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ê°ì²´,
ì˜ˆ) íšŒì›, ì£¼ë¬¸, ì¿ í° ë“±ë“± ì£¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ê´€ë¦¬



ì•„ì§ ë°ì´í„° ì €ì¥ì†Œê°€ ì„ ì •ë˜ì§€ ì•Šì•„ì„œ, ìš°ì„  ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„
--> ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“¤ì–´ ë†“ìœ¼ë©´ ë‚˜ì¤‘ì— ë°ì´í„°ë² ì´ìŠ¤ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤

**3-2íšŒì› ë„ë©”ì¸ê³¼ ë¦¬í¬ì§€í† ë¦¬ ë§Œë“¤ê¸°**

domain Member.java

repository : ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤ 

```java
public interface MemberRepository {
    Member save(Member member);//íšŒì›ì €ì¥ì‹œ ì €ì¥ëœ íšŒì› ë°˜í™˜
    //Optional(java8) nullì„ ê·¸ëŒ€ë¡œ ë°˜í™˜ë˜ì§€ ì•Šê²Œ ê°ì‹¸ì„œ ë°˜í™˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤
    Optional<Member> findById(Long id);//idì°¾ê¸°
    Optional<Member> findByName(String name);
    List<Member> findAll();//ì¡°íšŒ
}
```

repository êµ¬í˜„

```java
public class MemoryMemberRepository implements MemberRepository{

    private static Map<Long, Member>store= new HashMap<>();
    private static long sequence= 0L;//í‚¤ê°’ì„ ìƒì„±í•˜ê¸°v ìœ„í•´ ì‚¬ìš©í•œë‹¤
    @Override
    public Member save(Member member) {
        member.setId(++sequence);//sequenceê°’ì¦ê°€
store.put(member.getId(),member);//memberëŠ” nameìœ¼ë¡œ ë°›ì•„ì˜¨ë‹¤
        return member;
    }

    @Override
    public Optional<Member> findById(Long id) {
        return Optional.ofNullable(store.get(id));//nullë°˜í™˜ì„ ìœ„í•´ ì‚¬ìš©í•œë‹¤
    }

    @Override
    public Optional<Member> findByName(String name) {
        return store.values().stream().filter(member -> member.getName().equals(name)).findAny();//findAnyí•˜ë‚˜ë¼ë„ ì°¾ëŠ” ê²ƒ
    }

    @Override
    public List<Member> findAll() {
        return new ArrayList<>(store.values());//memberë“¤ ë°˜í™˜
    }

    public void clearStore(){
store.clear();
    }
}
```

**3-3íšŒì› ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±**

<íšŒì› ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±>
ê°œë°œí•œ ê¸°ëŠ¥ì„ ì‹¤í–‰í•´ì„œ í…ŒìŠ¤íŠ¸ í•  ë•Œ ìë°”ì˜ `main ë©”ì„œë“œ`ë¥¼ í†µí•´ì„œ ì‹¤í–‰í•˜ê±°ë‚˜, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ `ì»¨íŠ¸ë¡¤ëŸ¬`ë¥¼ í†µí•´ì„œ í•´ë‹¹ ê¸°ëŠ¥ì„ ì‹¤í–‰í•œë‹¤. ì´ëŸ¬í•œ ë°©ë²•ì€ ì¤€ë¹„í•˜ê³  ì‹¤í–‰í•˜ëŠ”ë° ì˜¤ë˜ ê±¸ë¦¬ê³ , ë°˜ë³µ ì‹¤í–‰í•˜ê¸° ì–´ë µê³  ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ í•œë²ˆì— ì‹¤í–‰í•˜ê¸° ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ìë°”ëŠ” JUnitì´ë¼ëŠ” í”„ë ˆì„ì›Œí¬ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ì„œ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤

```java
package hello.hellospring.repository;

import hello.hellospring.domain.Member;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;

import java.util.List;

import static org.assertj.core.api.Assertions.assertThat;

class MemoryMemberRepositoryTest {
    MemoryMemberRepository repository = new MemoryMemberRepository();

    @AfterEach
    public void afterEach() {//í…ŒìŠ¤íŠ¸ ë©”ì„œë“œê°€ ì‹¤í–‰ ëœ í›„ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
        repository.clearStore();//ìˆœì„œì— ì˜í–¥ì„ ë°›ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•´ ê°ê° í…ŒìŠ¤íŠ¸í›„ ë©”ëª¨ë¦¬ë¥¼ ë¹„ì›Œì£¼ëŠ” í•¨ìˆ˜
    }

    @Test
    public void save(){
        //given
        Member member = new Member();
        member.setName(("spring"));

        //when
        repository.save(member);

        //then
        Member result = repository.findById(member.getId()).get();
        //optionalì—ì„œ êº¼ë‚¼ ë•ŒëŠ” getì‚¬ìš©
        // System.out.println("result = " + (result == member));
        //Assertions.assertEquals(member, result);// ê¸°ëŒ€ê°’== ì‹¤ì œê°’ (ë¬¸ìê°€ ì•„ë‹ˆë¼ ì‹¤ì œê°’ì„ ë°”êµí•  ìˆ˜ ìˆë‹¤)
assertThat(result).isEqualTo(member);//static import
    }

    @Test
    public void findByName(){
        //given
        Member member1 = new Member();
        member1.setName("spring1");
        repository.save(member1);

        Member member2 = new Member();
        member2.setName("spring2");
        repository.save(member2);

        //when
        Member result = repository.findByName("spring1").get();

        //then
assertThat(result).isEqualTo(member1);
    }

    @Test
    public void findAll(){
        //given
        Member member1 = new Member();
        member1.setName("spring1");
        repository.save(member1);

        Member member2 = new Member();
        member2.setName("spring2");
        repository.save(member2);

        //when
        List<Member> result = repository.findAll();

        //then
assertThat(result.size()).isEqualTo(2);
    }
}

```

í…ŒìŠ¤íŠ¸ëŠ” ìˆœì„œì— ëŒ€í•œ ì˜ì¡´ ê´€ê³„ì—†ì´ ì„¤ê³„ê°€ ë˜ì–´ì•¼ í•œë‹¤
--> ìˆœì„œì— ì˜í–¥ì„ ë°›ì§€ ì•Šê²Œ í•´ì¤˜ì•¼ í•œë‹¤

```java
public void clearStore(){//testê°€ í•˜ë‚˜ ëë‚ ë•Œë§ˆë‹¤ ì €ì¥ì†Œë¥¼ ë¹„ì›Œì¤˜ì•¼ í•œë‹¤
store.clear();
}
```

**3-4íšŒì› ì„œë¹„ìŠ¤ ê°œë°œ**
ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” ë²•, ë¹„ì¦ˆë‹ˆìŠ¤ì— ì˜ì¡´ì ìœ¼ë¡œ ë©”ì„œë“œë¥¼ ì‘ì„±,

mapper(repository)ëŠ” ê°œë°œì— ê°€ê¹ê²Œ ì‘ì„±í•´ ì¤€ë‹¤

```java
package hello.hellospring.service;
import hello.hellospring.domain.Member;
import hello.hellospring.repository.MemberRepository;
import hello.hellospring.repository.MemoryMemberRepository;

import java.util.List;
import java.util.Optional;
public class MemberService {
    //private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final MemberRepository memberRepository;

    public MemberService(MemberRepository memberRepository) {
        //r
        this.memberRepository = memberRepository;
    } //ì™¸ë¶€ì—ì„œ ë„£ì–´ì£¼ë„ë¡ ë°”ê¿”ì¤€ë‹¤

/**
     *íšŒì›ê°€ì…
*/
public Long join(Member member) {
        //ê°™ì€ ì´ë¦„ì´ ìˆëŠ” ì¤‘ë³µíšŒì›x
        validateDuplicateMember(member); //ì¤‘ë³µ íšŒì› ê²€ì¦
        memberRepository.save(member);
        return member.getId();
    }

    private void validateDuplicateMember(Member member) {
//Optional<Member> result = memberRepository.findByname(member.getName());ì´ì§€ë§Œ 
//ë°˜í™˜ê°’ì´ ì–´ì°¨í”¼ Optionalì´ê¸°ë•Œë¬¸ì— ë³€ìˆ˜ì— ë„£ì§€ ì•Šê³  ë°”ë¡œ ì ìš©í•œë‹¤. ifPresentì€ Optionalì—ì„œ
//ì‚¬ìš©ê°€ëŠ¥í•¨
        memberRepository.findByName(member.getName())
                .ifPresent(m -> {//memerì— ê°’ì´ ìˆìœ¼ë©´(nullì´ ì•„ë‹ˆë©´) ë°‘ì˜ ì˜ˆì™¸ë¥¼ ë°˜í™˜
                    throw new IllegalStateException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
                });
    }
/**
     *ì „ì²´ íšŒì› ì¡°íšŒ
*/
public List<Member> findMembers() {
        return memberRepository.findAll();
    }
    public Optional<Member> findOne(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

**3-5íšŒì› ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸**
í´ë˜ìŠ¤ëª…ì— ë§ˆìš°ìŠ¤ ìœ„ì¹˜ í›„, alt + enter --> í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ìë™ìƒì„±

testëŠ” í•œê¸€ë¡œ ì‘ì„±í•´ë„ ê´œì°®ë‹¤, testì½”ë“œëŠ” ë¹Œë“œì‹œì— í¬í•¨ë˜ì§€ ì•Šë‹¤.

```java
package hello.hellospring.service;
import hello.hellospring.domain.Member;
import hello.hellospring.repository.MemoryMemberRepository;

import org.junit.jupiter.api.*;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.*;

class MemberServiceTest {
    MemberService memberService;
    //MemoryMemberRepository memberRepository = new MemoryMemberRepository();
    //ê°ì²´ ìƒì„±ì„ ë‹¤ì‹œ í•˜ì—¬ì„œ MemberServiceì—ì„œ ìƒì„±í•œ memberRepository ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ê°€ ëœë‹¤
    //ë‹¤ë¥¸ ë ˆíŒŒì§€í† ë¦¬ë¥¼ 
    MemoryMemberRepository memberRepository;

    
    //ë™ì‘í•˜ê¸° ì „ì— ë„£ì–´ì£¼ê¸°
    //ì™¸ë¶€ì—ì„œ ê°ì²´ë¥¼ ë„£ì–´ì£¼ë„ë¡ ì²˜ë¦¬í•œë‹¤ DI
    @BeforeEach
    public void beforeEach() {
        memberRepository = new MemoryMemberRepository();
        memberService = new MemberService(memberRepository);//ìƒì„±ìì— ë„£ì–´ì¤€ë‹¤
    }

    @AfterEach
    public void afterEach() {//ë ˆí¬ì§€í† ë¦¬ ì´ˆê¸°í™”ë¥¼ í•´ì¤€ë‹¤
        memberRepository.clearStore();
    }
    
    @Test
    public void íšŒì›ê°€ì…() throws Exception {//join í…ŒìŠ¤íŠ¸ì—ì„œëŠ” í•œê¸€ë¡œ ë°”ê¾¸ì–´ë„ ê´œì°®ìŒ
        //Given ì–´ë–¤ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ”ì§€
        Member member = new Member();
        member.setName("spring");

        //When ì–´ë–¤ê²ƒì„ ê²€ì¦í•˜ëŠ”ì§€
        Long saveId = memberService.join(member);

        //Then
        Member findMember  = memberService.findOne(saveId).get();
        assertThat(member.getName()).isEqualTo(findMember.getName());
    }

    @Test
    public void ì¤‘ë³µ_íšŒì›_ì˜ˆì™¸() throws Exception {//ì˜ˆì™¸ ì‚¬í•­ì— ëŒ€í•œ ê²€ì¦ë„ ì¤‘ìš”í•˜ë‹¤!!!
        //Given
        Member member1= new Member();
        member1.setName("spring");

        Member member2= new Member();
        member2.setName("spring");

        //When
        memberService.join(member1);
//        try{
//            memberService.join(member2);
//            fail();
//        }catch (IllegalStateException e){
//            assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
//        } --> ê²°ê³¼ê°€ ì• ë§¤í•¨

        IllegalStateException e = assertThrows(IllegalStateException.class,
                () -> memberService.join(member2));//ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼ í•œë‹¤
        assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
    }
}
```

}

```java
public class MemberService {
 private final MemberRepository memberRepository;
 public MemberService(MemberRepository memberRepository) {//
 this.memberRepository = memberRepository;
 }
 ...
}
```

buildë ë•Œ testì½”ë“œëŠ” í¬í•¨ë˜ì§€ ì•ŠìŒ

### 4. **ìŠ¤í”„ë§ ë¹ˆê³¼ ì˜ì¡´ê´€ê³„**

**4-1 ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ìë™ ì˜ì¡´ê´€ê³„ ì„¤ì •**

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ(memberControllerâ€”> memberService â€”> memberRepository)

controller : memberserviceë¥¼ í†µí•´ ì‘ì—…í•˜ëŠ” ê²ƒì„ ì˜ì¡´ ê´€ê³„ê°€ ìˆë‹¤ë¼ê³  í•œë‹¤

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ:MemberController ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë„£ì–´ë‘”ë‹¤(ê´€ë¦¬í•œë‹¤)-->ì»¨í…Œì´ë„ˆê°€ ë¹ˆì„ ê´€ë¦¬ëœë‹¤

<**ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ëŠ” 2ê°€ì§€ ë°©ë²•**>
ğŸ‘‰ğŸ¼1.ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ìë™ ì˜ì¡´ê´€ê³„ ì„¤ì • @(ì• ë…¸í…Œì´ì…˜)ì‚¬ìš©í•´ì„œ

ğŸ‘‰ğŸ¼2.ìë°” ì½”ë“œë¡œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡í•˜ê¸°

<**ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì›ë¦¬**>

ì»´í¬ë„ŒíŠ¸ìŠ¤ìº”:ê°ì²´ ìƒì„±í•´ì„œ ìŠ¤í”„ë§ì•ˆì— ë“¤ì–´ìˆëŠ” ê²ƒì´ë‹¤

â€”> ëª¨ë“  í´ë˜ìŠ¤ì— **@Component**ì„ ë„£ìœ¼ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë„£ì„ ìˆ˜ ìˆì„ê¹Œ? no, @SpringBootApplication(ì•ˆì— componentscanì´ ë“±ë¡ë˜ì–´ ìˆë‹¤) ë¶™ì€ í´ë˜ìŠ¤ê°€ ìˆëŠ” íŒ¨í‚¤ì§€ì—ì„œë§Œ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤(ì˜ˆì œëŠ” hello.hellospring)
**@Component** ì• ë…¸í…Œì´ì…˜ì´ ìˆìœ¼ë©´ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ëœë‹¤.
@Controller ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ëœ ì´ìœ ë„ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë•Œë¬¸ì´ë‹¤.
@Component ë¥¼ í¬í•¨í•˜ëŠ” ë‹¤ìŒ ì• ë…¸í…Œì´ì…˜ë„ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ëœë‹¤.
@Controller

```java
package hello.hellospring.controller;

import hello.hellospring.service.MemberService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;

@Controller//spring container(í° í†µ?)ê°€ ìŠ¤í”„ë§ì°½ì´ ëœ° ë•Œ MemberController ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë„£ì–´ë‘”ë‹¤-->ìŠ¤í”„ë§ ë¹ˆì´ ê´€ë¦¬ëœë‹¤
public class MemberController {
    //private final MemberService memberService = new MemberService();
    // ì—¬ëŸ¬ê°œì˜ ê°ì²´ ìƒì„±ì´ ê°€ëŠ¥í•˜ê¸°ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•˜ê³  ì“°ëŠ” ê²ƒì´ ì¢‹ë‹¤
    private final MemberService memberService;

    @Autowired//ìŠ¤í”„ë§ì´ ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆì— ìˆëŠ” memberServiceì™€ ì—°ê²°ì„ ì‹œì¼œì¤€ë‹¤ diì˜ì¡´ì„± ì£¼ì…ì„ í•´ì£¼ëŠ”ê²ƒ
    public MemberController(MemberService memberService){
        this.memberService = memberService;
    }

}

```

@Service

```java

@Service //ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆì— ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•œë‹¤, ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•´ì•¼ ì»¨í…Œì´ë„ˆì—ì„œ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬ë  //ìˆ˜ ìˆë‹¤
public class MemberService {
    //private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final MemberRepository memberRepository;

    @Autowired //ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆì— ìˆëŠ” ë©¤ë²„ë¦¬í¬ì§€í† ë¥¼ ì„œë¹„ìŠ¤ì— ì£¼ì…í•´ì¤€ë‹¤
    public MemberService(MemberRepository memberRepository) {
        //
        this.memberRepository = memberRepository;
    } //ì™¸ë¶€ì—ì„œ ë„£ì–´ì£¼ë„ë¡ ë°”ê¿”ì¤€ë‹¤
```

```java
@Repository//ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡
public class MemoryMemberRepository implements MemberRepository
```

ìƒì„±ìì— **@Autowired** ê°€ ìˆìœ¼ë©´ ìŠ¤í”„ë§ì´ ì—°ê´€ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ì°¾ì•„ì„œ ë„£ì–´ì¤€ë‹¤. ì´ë ‡ê²Œ ê°ì²´ ì˜ì¡´ê´€ê³„ë¥¼ ì™¸ë¶€ì—ì„œ ë„£ì–´ì£¼ëŠ” ê²ƒì„ **DI (Dependency Injection), ì˜ì¡´ì„± ì£¼ì…**ì´ë¼ í•œë‹¤.
ì´ì „ í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ê°œë°œìê°€ ì§ì ‘ ì£¼ì…í–ˆê³ , ì—¬ê¸°ì„œëŠ” @Autowiredì— ì˜í•´ ìŠ¤í”„ë§ì´ ì£¼ì…í•´ì¤€ë‹¤

ì°¸ê³ : ìƒì„±ìì— @Autowired ë¥¼ ì‚¬ìš©í•˜ë©´ ê°ì²´ ìƒì„± ì‹œì ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ í•´ë‹¹ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ
ì£¼ì…í•œë‹¤. ìƒì„±ìê°€ 1ê°œë§Œ ìˆìœ¼ë©´ @Autowired ëŠ” ìƒëµí•  ìˆ˜ ìˆë‹¤.

> ì°¸ê³ : ìŠ¤í”„ë§ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•  ë•Œ, ê¸°ë³¸ìœ¼ë¡œ **ì‹±ê¸€í†¤**ìœ¼ë¡œ ë“±ë¡í•œë‹¤(ìœ ì¼í•˜ê²Œ í•˜ë‚˜ë§Œ ë“±ë¡í•´ì„œ ê³µìœ í•œë‹¤) ë”°ë¼ì„œ ê°™ì€ ìŠ¤í”„ë§ ë¹ˆì´ë©´ ëª¨ë‘ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë‹¤. ì„¤ì •ìœ¼ë¡œ ì‹±ê¸€í†¤ì´ ì•„ë‹ˆê²Œ ì„¤ì •í•  ìˆ˜ ìˆì§€ë§Œ, íŠ¹ë³„í•œ ê²½ìš°ë¥¼ ì œì™¸í•˜ë©´ ëŒ€ë¶€ë¶„ ì‹±ê¸€í†¤ì„ ì‚¬ìš©í•œë‹¤

**4-2 ìë°” ì½”ë“œë¡œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡í•˜ê¸°**

<SpringConfig>

```java
package hello.hellospring;

import hello.hellospring.repository.MemberRepository;
import hello.hellospring.repository.MemoryMemberRepository;
import hello.hellospring.service.MemberService;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class SpringConfig {
    @Bean//ìŠ¤í”„ë§ë¹ˆì— ì§ì • ë“±ë¡í•˜ê¸°
    public MemberService memberService(){
        return new MemberService(memberRepository());
    }

    @Bean
    public MemberRepository memberRepository(){
        return new MemoryMemberRepository();//êµ¬í˜„ì²´ë¥¼ ë„£ì–´ì¤€ë‹¤
    }

}

```

ì°¸ê³ : XMLë¡œ ì„¤ì •í•˜ëŠ” ë°©ì‹ë„ ìˆì§€ë§Œ ìµœê·¼ì—ëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìƒëµí•œë‹¤.
> ì°¸ê³ : **DIì—ëŠ” í•„ë“œ ì£¼ì…, setter ì£¼ì…, ìƒì„±ì ì£¼ì…** ì´ë ‡ê²Œ 3ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤. ì˜ì¡´ê´€ê³„ê°€ ì‹¤í–‰ì¤‘ì—
ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ìœ¼ë¯€ë¡œ ìƒì„±ì ì£¼ì…ì„ ê¶Œì¥í•œë‹¤.

```java
 //1.í•„ë“œì£¼ì…
//    @Autowired private MemberService memberService;//í•„ë“œë¥¼ í†µí•´ ì£¼ì…í•˜ëŠ” ê²ƒì„ í•„ë“œ ì£¼ì…ì´ë¼ê³  í•œë‹¤
    //í•„ë“œì£¼ì…ì€ ë°”ê¿€ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ê¸°ì— ì„ í˜¸ë˜ì§€ ì•ŠëŠ”ë‹¤
    //2.setterì£¼ì…: ë‹¨ì  ëˆ„êµ°ê°€ í˜¸ì¶œí–ˆì„ë•Œ publicí•˜ê²Œ ë…¸ì¶œë  ìˆ˜ ìˆë‹¤(ë©”ì„œë“œë¥¼ publicìœ¼ë¡œ ì—´ë ¤ ìˆìœ¼ë¯€ë¡œ) ë¡œë”©ì‹œì ì— ë°”ê¾¸ê²Œ í•´ì•¼í•œë‹¤
    //ì¡°ë¦½ì‹œì ì—ë§Œ í•œë²ˆë§Œ ë„£ì„ ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤
    //@Autowired
//    public void setMemberSservice(MemberService memberService){
//        this.memberService = memberService;
//    }
    //3.ìƒì„±ìì£¼ì…
    @Autowired//ìŠ¤í”„ë§ì´ ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆì— ìˆëŠ” memberServiceì™€ ì—°ê²°ì„ ì‹œì¼œì¤€ë‹¤ diì˜ì¡´ì„± ì£¼ì…ì„ í•´ì£¼ëŠ”ê²ƒ
    public MemberController(MemberService memberService){//ìƒì„±ìë¥¼ í†µí•´ ì£¼ì…í•˜ëŠ” ê²ƒì„ ìƒì„±ì ì£¼ì…ì´ë¼ê³  í•œë‹¤
        this.memberService = memberService;
        //ì¡°ë¦½ë˜ëŠ”(ì„¸íŒ…ë˜ëŠ”) ì‹œì ì—
```

> ì°¸ê³ : ì‹¤ë¬´ì—ì„œëŠ” ì£¼ë¡œ ì •**í˜•í™”ëœ ì»¨íŠ¸ë¡¤ëŸ¬**, **ì„œë¹„ìŠ¤, ë¦¬í¬ì§€í† ë¦¬ ê°™ì€ ì½”ë“œëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”**ì„ ì‚¬ìš©í•œë‹¤. 
ê·¸ë¦¬ê³  ì •í˜•í™” ë˜ì§€ ì•Šê±°ë‚˜, ìƒí™©ì— ë”°ë¼ **êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë³€ê²½**í•´ì•¼ í•˜ë©´ ì„¤ì •ì„ í†µí•´ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ
ë“±ë¡í•œë‹¤.
> ì£¼ì˜: @Autowired ë¥¼ í†µí•œ DIëŠ” helloConroller , memberService ë“±ê³¼ ê°™ì´ ìŠ¤í”„ë§ì´ ê´€ë¦¬í•˜ëŠ”
ê°ì²´ì—ì„œë§Œ ë™ì‘í•œë‹¤. ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ì§€ ì•Šê³  ë‚´ê°€ ì§ì ‘ ìƒì„±í•œ ê°ì²´ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤

### 5. íšŒì› ê´€ë¦¬ ì˜ˆì œ - ì›¹ MVC ê°œë°œ

**5-1 íšŒì› ì›¹ ê¸°ëŠ¥ - í™ˆ í™”ë©´ ì¶”ê°€**

ì°¸ê³ : ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì •ì  íŒŒì¼ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤.

```java
package hello.hellospring.controller;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
@Controller
public class HomeController {
 @GetMapping("/")
 public String home() {
 return "home";
 }
}
```

**5-2 íšŒì› ì›¹ ê¸°ëŠ¥ - ë“±ë¡**

íšŒì› ë“±ë¡ í¼ ê°œë°œ

-getë°©ì‹: urlë¡œ ì§ì ‘ ë“¤ì–´ê°€ëŠ” ê²ƒ, ì¡°íšŒí•  ë•Œ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤

-postë°©ì‹: formì— ë°ì´í„°ë¥¼ ë„£ì–´ì„œ ì „ë‹¬í•œë‹¤ 

formì•ˆì˜ nameì´ í‚¤ì—­í• ì„ í•œë‹¤

â€”> methodì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤

```java
@GetMapping(value="/members/new")
public String createForm(){
    return "members/createMemberForm";
}

@PostMapping(value="/members/new")
public String create(MemberForm form){
    Member member = new Member();
    member.setName(form.getName());
    memberService.join(member);
    return "redirect:/";

}
```

íšŒì› ë“±ë¡ í¼ HTML 

```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div class="container">
  <form action="/members/new" method="post">
    <div class="form-group">
      <label for="name">ì´ë¦„</label>
      <input type="text" id="name" name="name" placeholder="ì´ë¦„ì„
ì…ë ¥í•˜ì„¸ìš”">
    </div>
    <button type="submit">ë“±ë¡</button>
  </form>
</div> <!-- /container -->
</body>
</html>
```

**5-3 íšŒì› ì›¹ ê¸°ëŠ¥ - ì¡°íšŒ**

```java
@GetMapping(value = "/members")
public String list(Model model) {
 List members = memberService.findMembers();
 model.addAttribute("members", members);
 return "members/memberList";
}
```

íšŒì› ë¦¬ìŠ¤íŠ¸ HTML

```html
<div class="container">
  <div>
    <table>
      <thead>
      <tr>
        <th>#</th>
        <th>ì´ë¦„</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="member : ${members}">
        <td th:text="${member.id}"></td>
        <td th:text="${member.name}"></td>
      </tr>
      </tbody>
    </table>
  </div>
</div> <!-- /container -->
</body>
</html>
```

ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ì— ì„ì‹œë¡œ ë‚¨ì€ ê²ƒë“¤ì„ ì¶œë ¥í•´ì£¼ëŠ” ê²ƒì´ë¯€ë¡œ ë©”ëª¨ë¦¬ë¥¼ ë‚´ë¦¬ë©´ ì €ì¥ëœ ë‚´ìš©ë“¤ì´ ì‚¬ë¼ì§„ë‹¤.

### 6. ìŠ¤í”„ë§ DB ì ‘ê·¼ ê¸°ìˆ 

**6-1. H2 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì¹˜**

ê°œë°œì´ë‚˜ í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œ ê°€ë³ê³  í¸ë¦¬í•œ DB, ì›¹ í™”ë©´ ì œê³µ

[https://www.h2database.com/html/main.html](https://www.h2database.com/html/main.html)

- ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜
h2 ë°ì´í„°ë² ì´ìŠ¤ ë²„ì „ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ ë²„ì „ì— ë§ì¶˜ë‹¤.
ê¶Œí•œ ì£¼ê¸°: chmod 755 h2.sh (ìœˆë„ìš° ì‚¬ìš©ìëŠ” x)
ì‹¤í–‰: ./h2.sh (ìœˆë„ìš° ì‚¬ìš©ìëŠ” h2.bat)
- ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ ìƒì„± ë°©ë²•
jdbc:h2:~/test (ìµœì´ˆ í•œë²ˆ)
~/test.mv.db íŒŒì¼ ìƒì„± í™•ì¸
ì´í›„ë¶€í„°ëŠ” jdbc:h2:tcp://localhost/~/test ì´ë ‡ê²Œ ì ‘ì†

â€”>ì†Œì¼“ì„ ì‚¬ìš©í•´ì„œ ì ‘ì†í•´ì•¼ í•œë‹¤

- ì—ëŸ¬ ë°œìƒì‹œ ~/test.mv.db íŒŒì¼ì„ ì§€ì›Œì¤€ë‹¤
- í…Œì´ë¸” ìƒì„±í•˜ê¸°
í…Œì´ë¸” ê´€ë¦¬ë¥¼ ìœ„í•´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— sql/ddl.sql íŒŒì¼ì„ ìƒì„±

```sql
drop table if exists member CASCADE;
create table member
(
 id bigint generated by default as identity,
//by default as identity:ìë™ìœ¼ë¡œ ê°’ì±„ì›Œì£¼ê¸° ìœ„í•´ ì‚¬ìš© 
 name varchar(255),
 primary key (id)
);
```

**6-2. ìˆœìˆ˜ jdbc**

<build.gradle íŒŒì¼ì— jdbc, h2 ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€>

```java
implementation 'org.springframework.boot:spring-boot-starter-jdbc'
runtimeOnly 'com.h2database:h2'//dbì™€ ë¶™ì„ ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ í•„ìš”í•˜ë‹¤
```

ìë°”ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ dbì™€ ì—°ê²°í•˜ê¸° ìœ„í•´ jdbcê°€ í•„ìš”í•˜ë‹¤!!â€”> ì´ê²ƒì„ ê°€ì§€ê³  ì„œë¡œ ì—°ë™ì„ í•œë‹¤.  

ë””ë¹„ì— ë¶™ê¸° ìœ„í•´ ì ‘ì† ì •ë³´ê°€ í•„ìš”í•˜ë‹¤ â€”> ìš”ì¦˜ì—ëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ê°€ í•´ì¤€ë‹¤

<resources/application.properties>

```
spring.datasource.url=jdbc:h2:tcp://localhost/~/test
spring.datasource.driver-class-name=org.h2.Driver
```

h2 databaseëŠ” ì•„ì´ë””,ë¹„ë°€ë²ˆí˜¸ëŠ” ìƒëµê°€ëŠ¥í•¨

ìˆ˜ì •ì„ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œ interfaceë¥¼ ì‚¬ìš©í•œë‹¤. 

ë‚˜ì¤‘ì— ë‚´ìš©ì„ ë°”ê¿€ ë•Œ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë§Œ ë°”ê¿”ë¼ìš°ë©´ ë¨(ì–´ì…ˆë¸”ë¦¬?)

ì—­í• ì€ Repositoryì¸í„°í˜ì´ìŠ¤ê°€ í•˜ì§€ë§Œ ì‹¤í˜„ì€ êµ¬í˜„ì²´ê°€ í•´ì¤€ë‹¤

```sql
package hello.hellospring.repository;
import hello.hellospring.domain.Member;
import org.springframework.jdbc.datasource.DataSourceUtils;
import javax.sql.DataSource;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;
import java.util.Optional;
public class JdbcMemberRepository implements MemberRepository {
    private final DataSource dataSource;//dbì— ë¶™ê¸° ìœ„í•´ í•„ìš”í•˜ë‹¤ 
    public JdbcMemberRepository(DataSource dataSource) {
        this.dataSource = dataSource;
    }
    @Override
    public Member save(Member member) {
        String sql = "insert into member(name) values(?)";//?íŒŒë¼ë¯¸í„°ì™€ ë°”ì¸ë”©

        Connection conn = null;//ì—°ê²°
        PreparedStatement pstmt = null;//sqlë„£ê¸° ìœ„í•´ ì‚¬ìš©
        ResultSet rs = null;//ê²°ê³¼ê°’ ë°›ê¸°
        try {
            conn = getConnection();
            pstmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);//Statement.RETURN_GENERATED_KEYS insertê°’ ì–»ê¸° ìœ„í•´ ì‚¬ìš©
            pstmt.setString(1, member.getName());
            pstmt.executeUpdate();//ì‹¤ì œ ì¿¼ë¦¬ì‘ì—…
            rs = pstmt.getGeneratedKeys();//ìƒì„±í•œ í‚¤ë¥¼ êº¼ë‚¼ ìˆ˜ ìˆë‹¤
            if (rs.next()) {
                member.setId(rs.getLong(1));
            } else {
                throw new SQLException("id ì¡°íšŒ ì‹¤íŒ¨");
            }
            return member;
        } catch (Exception e) {
            throw new IllegalStateException(e);
        } finally {
            close(conn, pstmt, rs);
        }
    }
    @Override
    public Optional<Member> findById(Long id) {
        String sql = "select * from member where id = ?";
        Connection conn = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;
        try {
            conn = getConnection();
            pstmt = conn.prepareStatement(sql);
            pstmt.setLong(1, id);
            rs = pstmt.executeQuery();//ì¡°íšŒëŠ”  executeQueryì‚¬ìš©
            if(rs.next()) {
                Member member = new Member();
                member.setId(rs.getLong("id"));
                member.setName(rs.getString("name"));
                return Optional.of(member);
            } else {
                return Optional.empty();
            }
        } catch (Exception e) {
            throw new IllegalStateException(e);
        } finally {
            close(conn, pstmt, rs);
        }
    }
    @Override
    public List<Member> findAll() {
        String sql = "select * from member";
        Connection conn = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;
        try {
            conn = getConnection();
            pstmt = conn.prepareStatement(sql);
            rs = pstmt.executeQuery();
            List<Member> members = new ArrayList<>();
            while(rs.next()) {
                Member member = new Member();
                member.setId(rs.getLong("id"));
                member.setName(rs.getString("name"));
                members.add(member);
            }
            return members;
        } catch (Exception e) {
            throw new IllegalStateException(e);
        } finally {
            close(conn, pstmt, rs);
        }
    }
    @Override
    public Optional<Member> findByName(String name) {
        String sql = "select * from member where name = ?";
        Connection conn = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;
        try {
            conn = getConnection();
            pstmt = conn.prepareStatement(sql);
            pstmt.setString(1, name);
            rs = pstmt.executeQuery();//ë¦¬ìŠ¤íŠ¸ë¡œ ë‹´ëŠ”ë‹¤ 
            if(rs.next()) {
                Member member = new Member();
                member.setId(rs.getLong("id"));
                member.setName(rs.getString("name"));
                return Optional.of(member);
            }
            return Optional.empty();
        } catch (Exception e) {
            throw new IllegalStateException(e);
        } finally {
            close(conn, pstmt, rs);
        }
    }
    private Connection getConnection() {
        return DataSourceUtils.getConnection(dataSource);//DataSourceUtilsì„ ì‚¬ìš©í•˜ë©´ transactionìœ ì§€ì— ë„ì›€ì„ ì¤€ë‹¤
    }
    private void close(Connection conn, PreparedStatement pstmt, ResultSet rs)
    {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        try {
            if (pstmt != null) {
                pstmt.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        try {
            if (conn != null) {
                close(conn);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
    private void close(Connection conn) throws SQLException {
        DataSourceUtils.releaseConnection(conn, dataSource);
    }
}
```

```java
private DataSource dataSource;
@Autowired
public SpringConfig(DataSource dataSource){
    this.dataSource = dataSource;
```

ë‹¤í–¥ì„±ì„ ì œê³µí•œë‹¤. â€”> êµ¬í˜„ì²´ë¥¼ ë°”ê¾¸ëŠ” ê²ƒ

DataSourceëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ íšë“í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´ë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ DataSourceë¥¼ ìƒì„±í•˜ê³  ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë§Œë“¤ì–´ë‘”ë‹¤. ê·¸ë˜ì„œ DIë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.

<**ê°œë°©-íì‡„ ì›ì¹™(OCP, Open-Closed Principle)**> â€”solidì›ì¹™
í™•ì¥ì—ëŠ” ì—´ë ¤ìˆê³ , ìˆ˜ì •, ë³€ê²½ì—ëŠ” ë‹«í˜€ìˆë‹¤.
ìŠ¤í”„ë§ì˜ DI (Dependencies Injection)ì„ ì‚¬ìš©í•˜ë©´ ê¸°**ì¡´ ì½”ë“œë¥¼ ì „í˜€ ì†ëŒ€ì§€ ì•Šê³ , ì„¤ì •ë§Œìœ¼ë¡œ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.**

ë°ì´í„°ë¥¼ DBì— ì €ì¥í•˜ë¯€ë¡œ ìŠ¤í”„ë§ ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ë„ ë°ì´í„°ê°€ ì•ˆì „í•˜ê²Œ ì €ì¥ëœë‹¤

ì¡°ë¦½í•˜ëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë©´ êµ¬í˜„ í´ë˜ìŠ¤ ìì²´ë¥¼ ë³€ê²½í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤

![contain.PNG](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5fa7f0d1-7a3a-4486-994d-2361fe1ce930/contain.png)

**6-3. ìŠ¤í”„ë§ í†µí•© í…ŒìŠ¤íŠ¸**

<íšŒì› ì„œë¹„ìŠ¤ ìŠ¤í”„ë§ í†µí•© í…ŒìŠ¤íŠ¸>

ì‹¤ë¬´ì—ì„œëŠ” testì‹œì—ëŠ” testìš© dbë¥¼ ì£¼ë¡œ êµ¬ì¶•í•œë‹¤

```java
package hello.hellospring.service;

import hello.hellospring.domain.Member;
import hello.hellospring.repository.MemberRepository;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.transaction.annotation.Transactional;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.assertThrows;

@SpringBootTest
@Transactional//í…ŒìŠ¤íŠ¸ì‹œ ë¨¼ì € ì‹¤í–‰ í…ŒìŠ¤íŠ¸ ì¢…ë£Œì‹œ ë°˜ì˜ì‹œí‚¤ì§€ ì•Šê³  rollbackì„ í•´ì¤€ë‹¤
public class MemberServiceIntegrationTest {
    @Autowired  MemberService memberService;//í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ê·¸ëƒ¥ í•„ë“œ ì£¼ì…ë°©ì‹ìœ¼ë¡œë„ ë§ì´ ì‚¬ìš©í•œë‹¤  ê°ì²´ìƒì„±ì´ ì—°ê²°ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì—
    @Autowired
    MemberRepository memberRepository;

    @Test
    public void íšŒì›ê°€ì…() throws Exception {//join í…ŒìŠ¤íŠ¸ì—ì„œëŠ” í•œê¸€ë¡œ ë°”ê¾¸ì–´ë„ ê´œì°®ìŒ
        //Given ì–´ë–¤ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ”ì§€
        Member member = new Member();
        member.setName("spring");

        //When ì–´ë–¤ê²ƒì„ ê²€ì¦í•˜ëŠ”ì§€
        Long saveId = memberService.join(member);

        //Then
        Member findMember  = memberService.findOne(saveId).get();
assertThat(member.getName()).isEqualTo(findMember.getName());
    }

    @Test
    public void ì¤‘ë³µ_íšŒì›_ì˜ˆì™¸() throws Exception {//ì˜ˆì™¸ ì‚¬í•­ì— ëŒ€í•œ ê²€ì¦ë„ ì¤‘ìš”í•˜ë‹¤!!!
        //Given
        Member member1= new Member();
        member1.setName("spring");

        Member member2= new Member();
        member2.setName("spring");

        //When
        memberService.join(member1);
//        try{
//            memberService.join(member2);
//            fail();
//        }catch (IllegalStateException e){
//            assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
//        } --> ê²°ê³¼ê°€ ì• ë§¤í•¨
        IllegalStateException e =assertThrows(IllegalStateException.class,
                () -> memberService.join(member2));//ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼ í•œë‹¤
assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
    }

}

```

@SpringBootTest : ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ í…ŒìŠ¤íŠ¸ë¥¼ í•¨ê»˜ ì‹¤í–‰í•œë‹¤.
@Transactional : í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì— ì´ ì• ë…¸í…Œì´ì…˜ì´ ìˆìœ¼ë©´, í…ŒìŠ¤íŠ¸ ì‹œì‘ ì „ì— íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³ , í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ì— í•­ìƒ ë¡¤ë°±í•œë‹¤. ì´ë ‡ê²Œ í•˜ë©´ DBì— ë°ì´í„°ê°€ ë‚¨ì§€ ì•Šìœ¼ë¯€ë¡œ ë‹¤ìŒ í…ŒìŠ¤íŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤

- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì—†ì´ í…ŒìŠ¤íŠ¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ í•„ìš”í•˜ë¯€ë¡œ ì¤‘ìš”í•œ ì‘ì—…ì´ë‹¤, ìˆœìˆ˜í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” ê¼­ í•„ìš”í•œ ë¶€ë¶„ì´ë‹¤
- @Commit : ìë™ìœ¼ë¡œ ì»¤ë°‹í•´ì£¼ê¸°

**6-4. ìŠ¤í”„ë§ jdbc Template**

ìˆœìˆ˜ Jdbcì™€ ë™ì¼í•œ í™˜ê²½ì„¤ì •ì„ í•˜ë©´ ëœë‹¤. 
ìŠ¤í”„ë§ JdbcTemplateê³¼ MyBatis ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” JDBC APIì—ì„œ ë³¸ ë°˜ë³µ ì½”ë“œë¥¼ ëŒ€ë¶€ë¶„ ì œê±°í•´ì¤€ë‹¤. í•˜ì§€ë§Œ SQLì€ ì§ì ‘ ì‘ìƒí•´ì•¼ í•œë‹¤ â€”> ì‹¤ë¬´ì—ì„œ ë§ì´ ì‚¬ìš©í•¨

jdbc Template : template  íŒ¨í„´ì—ì„œ ë”°ì™”ë‹¤

 ****

```java
package hello.hellospring.repository;

import hello.hellospring.domain.Member;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;
import org.springframework.jdbc.core.simple.SimpleJdbcInsert;

import javax.sql.DataSource;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Optional;

public class JdbcTemplateMemberRepository implements MemberRepository{
   private final JdbcTemplate jdbcTemplate;//JdbcTemplate ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”

    //@Autowired ìƒì„±ìê°€ í•˜ë‚˜ì¼ë•ŒëŠ” ìƒëµê°€ëŠ¥
    public JdbcTemplateMemberRepository(DataSource dataSource) {
        jdbcTemplate = new JdbcTemplate(dataSource);
    }

    @Override
    public Member save(Member member) {
        SimpleJdbcInsert jdbcInsert = new SimpleJdbcInsert(jdbcTemplate);
        jdbcInsert.withTableName("member").usingGeneratedKeyColumns("id");//ì¿¼ë¦¬ë¥¼ ì§œì§€ ì•Šì•„ë„ ë§Œë“¤ì–´ ì¤€ë‹¤-->insertë¬¸ ìƒì„±
        Map<String, Object> parameters = new HashMap<>();
        parameters.put("name", member.getName());
        Number key = jdbcInsert.executeAndReturnKey(new
                MapSqlParameterSource(parameters));
        member.setId(key.longValue());
        return member;
    }

    @Override
    public Optional<Member> findById(Long id) {
         List<Member> result = jdbcTemplate.query("select * from member where id = ?", memberRowMapper(), id);//ê²°ê³¼ë¥¼ RowMapperë¡œ ë§¤í•‘í•´ì•¼ í•œë‹¤
         return result.stream().findAny();
    }

    @Override
    public Optional<Member> findByName(String name) {
        List<Member> result = jdbcTemplate.query("select * from member where name = ?", memberRowMapper(),name);
        return result.stream().findAny();
    }

    @Override
    public List<Member> findAll() {
        return jdbcTemplate.query("select * from member", memberRowMapper());
    }

    private RowMapper<Member> memberRowMapper(){//ê°ì²´ìƒì„±
        return (rs, rowNum) -> {
            Member member = new Member();
            member.setId(rs.getLong("id"));
            member.setName(rs.getString("name"));
            return member;
        };
    }
}

```

**6-5. JPA**

JPAëŠ” ê¸°ì¡´ì˜ ë°˜ë³µ ì½”ë“œëŠ” ë¬¼ë¡ ì´ê³ , ê¸°ë³¸ì ì¸ SQLë„ JPAê°€ ì§ì ‘ ë§Œë“¤ì–´ì„œ ì‹¤í–‰í•´ì¤€ë‹¤.
JPAë¥¼ ì‚¬ìš©í•˜ë©´, SQLê³¼ ë°ì´í„° ì¤‘ì‹¬ì˜ ì„¤ê³„ì—ì„œ ê°ì²´ ì¤‘ì‹¬ì˜ ì„¤ê³„ë¡œ íŒ¨ëŸ¬ë‹¤ì„ì„ ì „í™˜ì„ í•  ìˆ˜ ìˆë‹¤.

spring-boot-starter-data-jpa ëŠ” ë‚´ë¶€ì— jdbc ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í¬í•¨í•œë‹¤. ë”°ë¼ì„œ jdbcëŠ” ì œê±°í•´ë„ ëœë‹¤

spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=non

show-sql : JPAê°€ ìƒì„±í•˜ëŠ” SQLì„ ì¶œë ¥í•œë‹¤.//jpaê°€ ë‚ ë¦¬ëŠ” sqlë¬¸ì„ ë³¼ ìˆ˜ ìˆë‹¤
ddl-auto : JPAëŠ” í…Œì´ë¸”ì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë° none ë¥¼ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ê¸°ëŠ¥ì„ ëˆë‹¤.
create ë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹° ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í…Œì´ë¸”ë„ ì§ì ‘ ìƒì„±í•´ì¤€ë‹¤. í•´ë³´ìspring.jpa.hibernate.ddl-auto=create

jpa(ìë°” ì§„ì˜ì˜ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤) -hibernate(êµ¬í˜„ì²´), êµ¬í˜„ì²´ë§ˆë‹¤ ì„±ëŠ¥ì°¨ì´ê°€ ì•½ê°„ì”© ì¡´ì¬í•˜ê¸´ í•¨

O(object)R(relation)M(mapping)

Member.java

```java
@Entity//JPA ì—”í‹°í‹° ë§¤í•‘,jpaê³¼ ê´€ë¦¬í•˜ëŠ” ì—”í‹°í‹°
public class Member {

    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String name;
```

@Entity: jpaì—ì„œ ê´€ë¦¬ë˜ëŠ” entitiyë¼ëŠ” ëœ»

 @Id @GeneratedValue(strategy = GenerationType.IDENTITY):ë””ë¹„ê°€ ì•Œì•„ì„œ primarykey ìë™ìƒì„±í•´ì£¼ê²Œ í•˜ê¸° ìœ„í•´ ì‚¬ìš© , IDENTITY ë””ë¹„ê°€ ì•Œì•„ì„œ ìƒì„±í•´ ì£¼ëŠ” ê²ƒì„ identityë¼ê³  í•œë‹¤

@Column(name="username") â€”> username ì»¬ëŸ¼ê³¼ ë§¤í•‘

```java
package hello.hellospring.repository;

import hello.hellospring.domain.Member;

import javax.persistence.EntityManager;
import java.util.List;
import java.util.Optional;

public class JpaMemberRepository implements MemberRepository{

    private final EntityManager em;//ë‚´ë¶€ì ìœ¼ë¡œ dbë‘ í†µì‹ ë“±ì„ ì•Œì•„ì„œ í•´ì¤€ë‹¤

    public JpaMemberRepository(EntityManager em) {
        this.em = em;
    }

    @Override
    public Member save(Member member) {
        em.persist(member);//ì €ì¥í•˜ë‹¤ëŠ” ì˜ë¯¸
        return member;
    }

    @Override
    public Optional<Member> findById(Long id) {
        Member member = em.find(Member.class, id);
        return Optional.ofNullable(member);
    }

    @Override
    public Optional<Member> findByName(String name) {
        List<Member> result = em.createQuery("select m from Member m where m.name = :name", Member.class).setParameter("name", name).getResultList();
        return result.stream().findAny();//í•˜ë‚˜ë§Œ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤
    }

    @Override
    public List<Member> findAll() {
        return em.createQuery("select m form Member m", Member.class).getResultList();
        //ê°ì²´ ìì²´ë¥¼ selectí•œë‹¤
        //pkê¸°ë°˜ì´ ì•„ë‹Œ ê²½ìš°ëŠ” jpql(ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë„˜ê¸°ëŠ” ê²ƒ)ì„ ì‘ì„±í•´ ì£¼ì–´ì•¼ í•œë‹¤
    }
}

```

```java
@Transactional
public class MemberService {
```

org.springframework.transaction.annotation.Transactional ë¥¼ ì‚¬ìš©í•˜ì.
ìŠ¤í”„ë§ì€ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•  ë•Œ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³ , ë©”ì„œë“œê°€ ì •ìƒ ì¢…ë£Œë˜ë©´ íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•œë‹¤. ë§Œì•½ ëŸ°íƒ€ì„ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ë¡¤ë°±í•œë‹¤.
**JPAë¥¼ í†µí•œ ëª¨ë“  ë°ì´í„° ë³€ê²½ì€ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì‹¤í–‰í•´ì•¼ í•œë‹¤**

**6-6. ìŠ¤í”„ë§ ë°ì´í„° JPA**

ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•˜ë©´, ê¸°ì¡´ì˜ í•œê³„ë¥¼ ë„˜ì–´ ë§ˆì¹˜ ë§ˆë²•ì²˜ëŸ¼, ë¦¬í¬ì§€í† ë¦¬ì— êµ¬í˜„ í´ë˜ìŠ¤ ì—†ì´ ì¸í„°í˜ì´ìŠ¤ ë§Œìœ¼ë¡œ ê°œë°œì„ ì™„ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë°˜ë³µ ê°œë°œí•´ì˜¨ ê¸°ë³¸ CRUD ê¸°ëŠ¥ë„ ìŠ¤í”„ë§ ë°ì´í„°JPAê°€ ëª¨ë‘ ì œê³µí•©ë‹ˆë‹¤ â€”> ê°œë°œìëŠ” í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤

ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ SpringDataJpaMemberRepository ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡í•´ì¤€ë‹¤ 

```java
package hello.hellospring.repository;

import hello.hellospring.domain.Member;
import org.springframework.data.jpa.repository.JpaRepository;

import java.util.Optional;

public interface SpringDataJpaMemberRepository extends JpaRepository<Member, Long>, MemberRepository {
    //JPQl select m from Member m where m.name = ?
    @Override
    Optional<Member> findByName(String name);
}
ì¸í„°í˜ì´ìŠ¤ë§Œ ë§Œë“¤ë©´ ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ SpringDataJpaMemberRepository ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡í•´ì¤€ë‹¤
```

```java
package hello.hellospring;

import hello.hellospring.repository.*;
import hello.hellospring.service.MemberService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import javax.persistence.EntityManager;
import javax.sql.DataSource;

@Configuration
public class SpringConfig {
//    //private DataSource dataSource;
//    @Autowired
//    public SpringConfig(DataSource dataSource){
//        this.dataSource = dataSource;
//    }
//    private EntityManager em;
//    @Autowired
//    public SpringConfig(EntityManager em){
//        this.em = em;
//    }

    private final MemberRepository memberRepository;
    public SpringConfig(MemberRepository memberRepository){//ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ êµ¬í˜„ì²´ë¥¼ ì°¾ëŠ”ë‹¤
        this.memberRepository = memberRepository;
    }
    @Bean//ìŠ¤í”„ë§ë¹ˆì— ì§ì • ë“±ë¡í•˜ê¸°
    public MemberService memberService(){
        return new MemberService(memberRepository);
    }

//    @Bean
//    public MemberRepository memberRepository(){
//        //return new MemoryMemberRepository();
        //return new JdbcMemberRepository(dataSource);
        //return new JdbcTemplateMemberRepository(dataSource);
//        return new JpaMemberRepository(em);
//    }

}

```


<ìŠ¤í”„ë§ ë°ì´í„° JPA ì œê³µ ê¸°ëŠ¥>
ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•œ ê¸°ë³¸ì ì¸ CRUD 

findByName() , findByEmail() ì²˜ëŸ¼ ë©”ì„œë“œ ì´ë¦„ ë§Œìœ¼ë¡œ ì¡°íšŒ ê¸°ëŠ¥ ì œê³µ
í˜ì´ì§• ê¸°ëŠ¥ ìë™ ì œê³µ
> ì°¸ê³ : ì‹¤ë¬´ì—ì„œëŠ” JPAì™€ ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ê³ , ë³µì¡í•œ ë™ì  ì¿¼ë¦¬ëŠ” Querydslì´ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. Querydslì„ ì‚¬ìš©í•˜ë©´ ì¿¼ë¦¬ë„ ìë°” ì½”ë“œë¡œ ì•ˆì „í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆê³ , ë™ì  ì¿¼ë¦¬ë„ í¸ë¦¬í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì´ ì¡°í•©ìœ¼ë¡œ í•´ê²°í•˜ê¸° ì–´ë ¤ìš´ ì¿¼ë¦¬ëŠ” JPAê°€ ì œê³µí•˜ëŠ” ë„¤ì´í‹°ë¸Œ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, ì•ì„œ í•™ìŠµí•œ ìŠ¤í”„ë§ JdbcTemplateë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤

### 7.**AOP**

**7-1. AOPê°€ í•„ìš”í•œ ìƒí™©**

ëª¨ë“  ë©”ì†Œë“œì˜ í˜¸ì¶œ ì‹œê°„ì„ ì¸¡ì •í•˜ê³  ì‹¶ë‹¤ë©´?
ê³µí†µ ê´€ì‹¬ ì‚¬í•­(cross-cutting concern) vs í•µì‹¬ ê´€ì‹¬ ì‚¬í•­(core concern)
íšŒì› ê°€ì… ì‹œê°„, íšŒì› ì¡°íšŒ ì‹œê°„ì„ ì¸¡ì •í•˜ê³  ì‹¶ë‹¤ë©´?

```java
package hello.hellospring.service;
import hello.hellospring.domain.Member;
import hello.hellospring.repository.MemberRepository;
import hello.hellospring.repository.MemoryMemberRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;
import java.util.Optional;

//@Service //ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆì— ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•œë‹¤
@Transactional
public class MemberService {
    //private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final MemberRepository memberRepository;

    //@Autowired //ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆì— ìˆëŠ” ë©¤ë²„ë¦¬í¬ì§€í† ë¥¼ ì„œë¹„ìŠ¤ì— ì£¼ì…í•´ì¤€ë‹¤
    public MemberService(MemberRepository memberRepository) {
        //
        this.memberRepository = memberRepository;
    } //ì™¸ë¶€ì—ì„œ ë„£ì–´ì£¼ë„ë¡ ë°”ê¿”ì¤€ë‹¤

/**
     *íšŒì›ê°€ì…
*/
public Long join(Member member) {
        long start = System.currentTimeMillis();
        try{
            //ê°™ì€ ì´ë¦„ì´ ìˆëŠ” ì¤‘ë³µíšŒì›x
            validateDuplicateMember(member); //ì¤‘ë³µ íšŒì› ê²€ì¦
            memberRepository.save(member);
            return member.getId();
        }finally {
            long finish = System.currentTimeMillis();
            long timeMs = finish - start;
            System.out.println("join =" +timeMs+ "ms");
        }

    }

    private void validateDuplicateMember(Member member) {
        memberRepository.findByName(member.getName())
                .ifPresent(m -> {
                    throw new IllegalStateException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
                });
    }
/**
     *ì „ì²´ íšŒì› ì¡°íšŒ
*/
public List<Member> findMembers() {
        long start = System.currentTimeMillis();
        try {
            return memberRepository.findAll();
        }finally {
            long finish = System.currentTimeMillis();
            long timeMs = finish - start;
            System.out.println("findMembers =" +timeMs+ "ms");
        }

    }
    public Optional<Member> findOne(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

<ë¬¸ì œ>
íšŒì›ê°€ì…, íšŒì› ì¡°íšŒì— ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ê¸°ëŠ¥ì€ í•µì‹¬ ê´€ì‹¬ ì‚¬í•­ì´ ì•„ë‹ˆë‹¤.
ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë¡œì§ì€ ê³µí†µ ê´€ì‹¬ ì‚¬í•­ì´ë‹¤.
ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë¡œì§ê³¼ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ì˜ ë¡œì§ì´ ì„ì—¬ì„œ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µë‹¤.
ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë¡œì§ì„ ë³„ë„ì˜ ê³µí†µ ë¡œì§ìœ¼ë¡œ ë§Œë“¤ê¸° ë§¤ìš° ì–´ë µë‹¤.
ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë¡œì§ì„ ë³€ê²½í•  ë•Œ ëª¨ë“  ë¡œì§ì„ ì°¾ì•„ê°€ë©´ì„œ ë³€ê²½í•´ì•¼ í•œë‹¤.

**7-2. AOP ì ìš©**

AOP: Aspect Oriented Programming
ê³µí†µ ê´€ì‹¬ ì‚¬í•­(cross-cutting concern) vs í•µì‹¬ ê´€ì‹¬ ì‚¬í•­(core concern) ë¶„ë¦¬

![aop.PNG](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/70301662-c472-45da-b828-e010a8a2ed0c/aop.png)

ì‹œê°„ ì¸¡ì • AOP ë“±ë¡

```java

package hello.hellospring.aop;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.springframework.stereotype.Component;
@Component//Beanì— ë“±ë¡í•´ì•¼ ì¸ì§€í•˜ê¸° ì‰¬ì›€ìœ¼ë¡œ ì§ì ‘ ë“±ë¡í•˜ëŠ” ê²ƒì´ ë” ì¢‹ë‹¤
@Aspect
public class TimeTraceAop {
 @Around("execution(* hello.hellospring..*(..))")
//Around ì–´ë””ì— ì ìš©í• ì§€ íƒ€ê²ŸíŒ…ì„ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤, íŒŒë¼ë¯¸í„°ì— ì›í•˜ëŠ” ì¡°ê±´ì„ ì ëŠ”ë‹¤
 public Object execute(ProceedingJoinPoint joinPoint) throws Throwable {
 long start = System.currentTimeMillis();
 System.out.println("START: " + joinPoint.toString());
 try {
 return joinPoint.proceed();//ë‹¤ìŒ ë©”ì„œë“œ ì§„í–‰
 } finally {
 long finish = System.currentTimeMillis();
 long timeMs = finish - start;
 System.out.println("END: " + joinPoint.toString()+ " " + timeMs +
"ms");
 }
 }
}
```

**í•´ê²°**
íšŒì›ê°€ì…, íšŒì› ì¡°íšŒë“± í•µì‹¬ ê´€ì‹¬ì‚¬í•­ê³¼ ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ê³µí†µ ê´€ì‹¬ ì‚¬í•­ì„ ë¶„ë¦¬í•œë‹¤.
ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë¡œì§ì„ ë³„ë„ì˜ ê³µí†µ ë¡œì§ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤.
í•µì‹¬ ê´€ì‹¬ ì‚¬í•­ì„ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
ë³€ê²½ì´ í•„ìš”í•˜ë©´ ì´ ë¡œì§ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤.
ì›í•˜ëŠ” ì ìš© ëŒ€ìƒì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤.

ìŠ¤í”„ë§ì˜ AOP ë™ì‘ ë°©ì‹ ì„¤ëª…


ê°€ì§œ memberService(í”„ë¡ì‹œ)ë¥¼ ë§Œë“ ë‹¤ â€”> ê°€ì§œë¥¼ ì‹¤í–‰ ì‹œí‚¨í›„ ì§„ì§œë¥¼ ì‹¤í–‰ ì‹œì¼œì¤€ë‹¤

memberControllerì—ì„œ memberService.getClass() ë¥¼ ì°ì–´ë³´ë©´ í”„ë¡ì‹œë¥¼ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆë‹¤.



